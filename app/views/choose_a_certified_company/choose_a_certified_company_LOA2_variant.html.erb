<%= page_title 'hub.choose_a_certified_company.title' %>
<% content_for :feedback_source, 'CHOOSE_A_CERTIFIED_COMPANY_PAGE' %>
<% content_for :additional_javascript do %>
    <%= javascript_include_tag 'piwik_idp_picker_tracking' %>
<% end %>

<div class="content-inner">
  <div class="grid-row">
    <div class="column-two-thirds">
      <h1 class="heading-large"><%= t 'hub.choose_a_certified_company.heading' %></h1>
      <p><%= t 'hub.choose_a_certified_company.existing_customer_variant' %></p>
      <p class="panel panel-border-narrow text"><%= t 'hub.choose_a_certified_company.no_charge_information_variant' %></p>
      <p class="large-top">
      <% if @any_docs %>
        <p><%= t 'hub.choose_a_certified_company.list_text_variant' %></p>
          <ul class="list-bullet list">
            <% if @driving_licence %> <li><%= t 'hub.choose_a_certified_company.driving_licence_variant' %></li> <% end %>
            <% if @non_uk_id_document %> <li><%= t 'hub.choose_a_certified_company.non_uk_id_document_variant' %></li> <% end %>
            <% if @smart_phone %> <li><%= t 'hub.choose_a_certified_company.smart_phone_variant' %></li> <% end %>
            <% if @passport %> <li><%= t 'hub.choose_a_certified_company.passport_variant' %></li> <% end %>
          </ul>
        </p>
        <% else %>
        <%= t 'hub.choose_a_certified_company.idp_count_html',
                company_count: t('hub.choose_a_certified_company.company_html', count: @recommended_idps.length) %>
      <% end %>
    </div>
  </div>
  <div id="matching-idps">
    <% @recommended_idps.each do |identity_provider| %>
      <%= render partial: 'choose_a_certified_company/idp_option', locals: {recommended: true, identity_provider: identity_provider} %>
    <% end %>
  </div>
  <% if @non_recommended_idps.any? %>
    <div id="non-matching-idps">
      <div class="grid-row">
        <div class="column-two-thirds">
          <p class="large-top">
            <%= t 'hub.choose_a_certified_company.filtered_idps_message_html',
                  company_count: t('hub.choose_a_certified_company.company_html', count: @non_recommended_idps.length) %>
          </p>
        </div>
      </div>
      <details>
        <summary>
          <span class="summary"><%= t 'hub.choose_a_certified_company.show_all_companies' %></span>
        </summary>
        <div class="panel panel-border-narrow">
          <% @non_recommended_idps.each do |identity_provider| %>
            <%= render partial: 'choose_a_certified_company/idp_option', locals: {recommended: false, identity_provider: identity_provider} %>
          <% end %>
        </div>
      </details>
    </div>
  <% end %>
  <div class="grid-row">
    <div class="column-two-thirds">
      <p><%= t 'hub.choose_a_certified_company.trusted_companies_variant' %></p>
    </div>
  </div>
</div>
